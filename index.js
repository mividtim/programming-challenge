(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jiboProgrammingChallenge = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
/// <reference path='../typings/index.d.ts' />
const PIXI = require("pixi.js");
const TweenLite = require("gsap/TweenLite");
const sounds_1 = require("./sounds");
const SCREEN_WIDTH = 1280;
const SCREEN_HEIGHT = 720;
const INITIAL_SIZE = 20;
const COLOR_BUTTON = 0x444411;
const COLOR_EVEN = 0xee1111;
const COLOR_ODD = 0x111111;
const COLOR_ARROW = 0xeeeeee;
const COLOR_CHECKER = 0x111111;
const BUTTON_WIDTH = 150;
const BUTTON_HEIGHT = 50;
class Visualization {
    constructor(checker1, checker2, boardLayout, startingPosition, squareSize, sounds) {
        this.checker1 = checker1;
        this.checker2 = checker2;
        this.boardLayout = boardLayout;
        this.startingPosition = startingPosition;
        this.squareSize = squareSize;
        this.sounds = sounds;
        this.running = false;
    }
}
(function () {
    const sounds = new sounds_1.Sounds({
        move: './sounds/move.mp3',
        collide: './sounds/collide.wav',
        fall: './sounds/fall.wav',
    });
    const renderer = new PIXI.WebGLRenderer(SCREEN_WIDTH, SCREEN_HEIGHT);
    document.body.appendChild(renderer.view);
    const stage = new PIXI.Container();
    renderLoop(renderer, stage);
    const visualizationBoard = new PIXI.Container();
    visualizationBoard.position = new PIXI.Point(SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2 - BUTTON_HEIGHT / 2);
    stage.addChild(visualizationBoard);
    const visualization = newVisualization(visualizationBoard, INITIAL_SIZE, sounds);
    createControls(stage, visualizationBoard, visualization);
})();
function createControls(stage, visualizationBoard, visualization) {
    function changeSize(amount) {
        stop(visualization);
        let newSize = visualization.boardLayout.length + amount;
        if (newSize < 1)
            newSize = 1;
        // Keep track of the message text in the new visualization
        const message = visualization.message;
        message.text = 'Press Play to Begin';
        visualization = newVisualization(visualizationBoard, newSize, visualization.sounds);
        visualization.message = message;
    }
    stage.addChild(createButton(SCREEN_WIDTH / 2 - BUTTON_WIDTH * 1.5 - 60, SCREEN_HEIGHT - BUTTON_HEIGHT / 2 - 50, '-', () => changeSize(-1), true // small button
    ));
    stage.addChild(createButton(SCREEN_WIDTH / 2 - BUTTON_WIDTH * 2 - 80, SCREEN_HEIGHT - BUTTON_HEIGHT / 2 - 50, '+', () => changeSize(1), true // small button
    ));
    stage.addChild(createButton(SCREEN_WIDTH / 2 - BUTTON_WIDTH / 2 - 20, SCREEN_HEIGHT - BUTTON_HEIGHT / 2 - 50, 'Shuffle', () => {
        stop(visualization);
        // Keep track of the message text in the new visualization
        const message = visualization.message;
        message.text = 'Press Play to Begin';
        visualization = newVisualization(visualizationBoard, visualization.boardLayout.length, visualization.sounds);
        visualization.message = message;
    }));
    stage.addChild(createButton(SCREEN_WIDTH / 2 + BUTTON_WIDTH / 2 + 20, SCREEN_HEIGHT - BUTTON_HEIGHT / 2 - 50, 'Play', () => { if (!visualization.running)
        play(visualization); }));
    stage.addChild(createButton(SCREEN_WIDTH / 2 + BUTTON_WIDTH * 1.5 + 60, SCREEN_HEIGHT - BUTTON_HEIGHT / 2 - 50, 'Stop', () => {
        if (visualization.running) {
            visualization.message.text = 'Stopped';
            stop(visualization);
        }
    }));
    visualization.message = new PIXI.Text('Press Play to Begin', {
        fill: [0xcccccc, COLOR_BUTTON],
        stroke: 0xeeeeee,
        strokeThickness: 2
    });
    visualization.message.anchor.x = .5;
    visualization.message.position = new PIXI.Point(SCREEN_WIDTH / 2, 20);
    stage.addChild(visualization.message);
}
function newVisualization(visualizationBoard, boardSize, sounds) {
    const boardLayout = newBoardLayout(boardSize);
    const squareSize = Math.min(SCREEN_WIDTH / boardSize, SCREEN_HEIGHT / boardSize) * .75;
    createBoard(visualizationBoard, boardLayout, squareSize);
    const startingPosition = randomPosition(boardLayout);
    const checker1 = createChecker(squareSize);
    visualizationBoard.addChild(checker1);
    checker1.position = boardPositionToPixels(boardLayout.length, squareSize, startingPosition);
    const checker2 = createChecker(squareSize);
    visualizationBoard.addChild(checker2);
    checker2.position = boardPositionToPixels(boardLayout.length, squareSize, startingPosition);
    return new Visualization(checker1, checker2, boardLayout, startingPosition, squareSize, sounds);
}
function play(visualization, checker1Position = null, checker2Position = null, evenMove = false) {
    visualization.message.text = "Running";
    visualization.running = true;
    if (!checker1Position) {
        checker1Position = new PIXI.Point(visualization.startingPosition.x, visualization.startingPosition.y);
        checker2Position = new PIXI.Point(visualization.startingPosition.x, visualization.startingPosition.y);
    }
    let endCondition;
    checker1Position = moveChecker(visualization.checker1, checker1Position, visualization.boardLayout, visualization.squareSize);
    // Have to check before moving the second checker
    endCondition = testEndCondition(visualization.boardLayout, checker1Position, checker2Position);
    if (!endCondition && evenMove) {
        checker2Position = moveChecker(visualization.checker2, checker2Position, visualization.boardLayout, visualization.squareSize);
        endCondition = testEndCondition(visualization.boardLayout, checker1Position, checker2Position);
    }
    visualization.sounds.play('move');
    if (endCondition) {
        TweenLite.to(visualization.checker1.scale, .5, { x: 0, y: 0 });
        visualization.message.text = endCondition;
        visualization.sounds.play(endCondition.indexOf('non') < 0 ? 'collide' : 'fall');
        setTimeout(() => stop(visualization), 500);
    }
    else
        visualization.timeout = setTimeout(() => play(visualization, checker1Position, checker2Position, !evenMove), 500);
}
function stop(visualization) {
    if (visualization.running) {
        if (visualization.timeout) {
            clearTimeout(visualization.timeout);
            visualization.timeout = null;
        }
        const pixelPosition = boardPositionToPixels(visualization.boardLayout.length, visualization.squareSize, visualization.startingPosition);
        TweenLite.to(visualization.checker1.scale, .3, { x: 1, y: 1 });
        TweenLite.to(visualization.checker1.position, .3, { x: pixelPosition.x, y: pixelPosition.y });
        TweenLite.to(visualization.checker2.position, .3, { x: pixelPosition.x, y: pixelPosition.y });
        visualization.running = false;
    }
}
function moveChecker(checker, currentPosition, boardLayout, squareSize) {
    const direction = boardLayout[currentPosition.x][currentPosition.y];
    let nextPosition;
    switch (direction) {
        case 0 /* Up */:
            nextPosition = new PIXI.Point(currentPosition.x - 1, currentPosition.y);
            break;
        case 2 /* Down */:
            nextPosition = new PIXI.Point(currentPosition.x + 1, currentPosition.y);
            break;
        case 3 /* Left */:
            nextPosition = new PIXI.Point(currentPosition.x, currentPosition.y - 1);
            break;
        case 1 /* Right */:
            nextPosition = new PIXI.Point(currentPosition.x, currentPosition.y + 1);
            break;
    }
    const pixelPosition = boardPositionToPixels(boardLayout.length, squareSize, nextPosition);
    TweenLite.to(checker.position, .3, { x: pixelPosition.x, y: pixelPosition.y });
    return nextPosition;
}
function testEndCondition(boardLayout, checker1Position, checker2Position) {
    let endCondition;
    if (!validPosition(boardLayout, checker1Position))
        endCondition = 'The path is noncircular.';
    else if (samePosition(checker1Position, checker2Position))
        endCondition = 'The path is circular.';
    return endCondition;
}
function validPosition(boardLayout, position) {
    return !(position.x < 0 ||
        position.x > boardLayout.length - 1 ||
        position.y < 0 ||
        position.y > boardLayout[0].length - 1);
}
function samePosition(position1, position2) {
    return position1.x === position2.x && position1.y === position2.y;
}
function newBoardLayout(size) {
    const boardLayout = [];
    for (let row = 0; row < size; row++) {
        boardLayout.push([]);
        for (let col = 0; col < size; col++) {
            const boardPosition = new PIXI.Point(row, col);
            const arrowDirection = Math.floor(Math.random() * 4);
            boardLayout[row].push(arrowDirection);
        }
    }
    return boardLayout;
}
function createBoard(visualizationBoard, boardLayout, squareSize) {
    clearContainer(visualizationBoard);
    const rows = boardLayout.length;
    const cols = boardLayout[0].length;
    let even = false;
    for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
            const boardPosition = new PIXI.Point(row, col);
            const square = createSquare(squareSize, even);
            square.position = boardPositionToPixels(boardLayout.length, squareSize, boardPosition);
            visualizationBoard.addChild(square);
            square.addChild(createArrow(squareSize, boardLayout[row][col]));
            even = !even;
        }
        if (rows % 2 === 0)
            even = !even;
    }
    return visualizationBoard;
}
function createSquare(size, even) {
    const square = new PIXI.Graphics();
    square.beginFill(even ? COLOR_EVEN : COLOR_ODD);
    square.drawRect(-size / 2, -size / 2, size, size);
    square.endFill();
    return square;
}
function createArrow(size, direction) {
    const arrow = new PIXI.Graphics();
    arrow.beginFill(COLOR_ARROW);
    arrow.drawRect(-size / 12, -size * .2, size / 6, size * .6);
    arrow.drawPolygon([
        new PIXI.Point(0, -size * .4),
        new PIXI.Point(-size * .25, -size * .1),
        new PIXI.Point(size * .25, -size * .1)
    ]);
    arrow.endFill();
    arrow.rotation = Math.PI / 2 * direction;
    return arrow;
}
function createChecker(size) {
    const checker = new PIXI.Graphics();
    checker.alpha = .75;
    checker.lineStyle(2, 0xeeeeee);
    checker.beginFill(COLOR_CHECKER);
    checker.drawCircle(0, 0, size * .3);
    checker.endFill();
    return checker;
}
function createButton(x, y, label, action, small = false) {
    const button = new PIXI.Graphics();
    const width = small ? BUTTON_WIDTH / 2 : BUTTON_WIDTH;
    button.position = new PIXI.Point(x - width / 2, y - BUTTON_HEIGHT / 2);
    button.lineStyle(2, 0xeeeeee);
    button.beginFill(COLOR_BUTTON);
    button.drawRect(0, 0, width, BUTTON_HEIGHT);
    button.endFill();
    const text = new PIXI.Text(label, { stroke: 0xeeeeee, fill: 0x111111, strokeThickness: 2, align: 'center', lineJoin: 'round' });
    text.position = new PIXI.Point(width / 2, BUTTON_HEIGHT / 2);
    text.anchor.x = .5;
    text.anchor.y = .5;
    button.addChild(text);
    button.interactive = true;
    button.on('mouseup', action);
    button.on('touchend', action);
    return button;
}
function boardPositionToPixels(boardSize, squareSize, boardPosition) {
    return new PIXI.Point((boardPosition.y - boardSize / 2) * squareSize, (boardPosition.x - boardSize / 2) * squareSize);
}
function randomPosition(boardLayout) {
    return new PIXI.Point(Math.floor(Math.random() * boardLayout.length), Math.floor(Math.random() * boardLayout[0].length));
}
function clearContainer(container) {
    container.children.forEach(function (child) { child.destroy(); });
    container.removeChildren();
}
function renderLoop(renderer, stage) {
    requestAnimationFrame(() => renderLoop(renderer, stage));
    renderer.render(stage);
}

},{"./sounds":2,"gsap/TweenLite":undefined,"pixi.js":undefined}],2:[function(require,module,exports){
"use strict";
class Sounds {
    constructor(sounds) {
        this.sounds = {};
        for (let sound in sounds) {
            const audio = new Audio();
            audio.src = sounds[sound];
            audio.preload = 'true';
            this.sounds[sound] = audio;
        }
    }
    play(soundName) {
        this.sounds[soundName].pause();
        this.sounds[soundName].currentTime = 0;
        this.sounds[soundName].play();
    }
}
exports.Sounds = Sounds;

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5kZXgudHMiLCJzcmMvc291bmRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBLDhDQUE4QztBQUM5QyxnQ0FBZ0M7QUFDaEMsNENBQTRDO0FBQzVDLHFDQUErQjtBQUUvQixNQUFNLFlBQVksR0FBVSxJQUFJLENBQUE7QUFDaEMsTUFBTSxhQUFhLEdBQVUsR0FBRyxDQUFBO0FBQ2hDLE1BQU0sWUFBWSxHQUFVLEVBQUUsQ0FBQTtBQUM5QixNQUFNLFlBQVksR0FBVSxRQUFRLENBQUE7QUFDcEMsTUFBTSxVQUFVLEdBQVUsUUFBUSxDQUFBO0FBQ2xDLE1BQU0sU0FBUyxHQUFVLFFBQVEsQ0FBQTtBQUNqQyxNQUFNLFdBQVcsR0FBVSxRQUFRLENBQUE7QUFDbkMsTUFBTSxhQUFhLEdBQVUsUUFBUSxDQUFBO0FBQ3JDLE1BQU0sWUFBWSxHQUFVLEdBQUcsQ0FBQTtBQUMvQixNQUFNLGFBQWEsR0FBVSxFQUFFLENBQUE7QUFTL0I7SUFVRSxZQUFZLFFBQTJCLEVBQUUsUUFBMkIsRUFBRSxXQUFzQixFQUFFLGdCQUEyQixFQUFFLFVBQWlCLEVBQUUsTUFBYTtRQUN6SixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQTtRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7UUFDeEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7SUFDdEIsQ0FBQztDQUNGO0FBRUQsQ0FBQztJQUNDLE1BQU0sTUFBTSxHQUFVLElBQUksZUFBTSxDQUFDO1FBQy9CLElBQUksRUFBRSxtQkFB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QUFPLENBQUMsVUFBUyxLQUF3QixJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2xGLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQTtBQUM1QixDQUFDO0FBRUQsb0JBQW9CLFFBQTJCLEVBQUUsS0FBb0I7SUFDakUscUJBQXFCLENBQUMsTUFBTSxVQUFVLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUE7SUFDeEQsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUMxQixDQUFDOzs7O0FDM1VEO0lBRUUsWUFBWSxNQUFNO1FBRGxCLFdBQU0sR0FBRyxFQUFFLENBQUE7UUFFVCxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUE7WUFDekIsS0FBSyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDekIsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUE7WUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUE7UUFDNUIsQ0FBQztJQUNILENBQUM7SUFDRCxJQUFJLENBQUMsU0FBUztRQUNaLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFBO1FBQ3RDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDL0IsQ0FBQztDQUNGO0FBZkQsd0JBZUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vdHlwaW5ncy9pbmRleC5kLnRzJyAvPlxuaW1wb3J0IFBJWEkgPSByZXF1aXJlKCdwaXhpLmpzJylcbmltcG9ydCBUd2VlbkxpdGUgPSByZXF1aXJlKCdnc2FwL1R3ZWVuTGl0ZScpXG5pbXBvcnQge1NvdW5kc30gZnJvbSAnLi9zb3VuZHMnXG5cbmNvbnN0IFNDUkVFTl9XSURUSDpudW1iZXIgPSAxMjgwXG5jb25zdCBTQ1JFRU5fSEVJR0hUOm51bWJlciA9IDcyMFxuY29uc3QgSU5JVElBTF9TSVpFOm51bWJlciA9IDIwXG5jb25zdCBDT0xPUl9CVVRUT046bnVtYmVyID0gMHg0NDQ0MTFcbmNvbnN0IENPTE9SX0VWRU46bnVtYmVyID0gMHhlZTExMTFcbmNvbnN0IENPTE9SX09ERDpudW1iZXIgPSAweDExMTExMVxuY29uc3QgQ09MT1JfQVJST1c6bnVtYmVyID0gMHhlZWVlZWVcbmNvbnN0IENPTE9SX0NIRUNLRVI6bnVtYmVyID0gMHgxMTExMTFcbmNvbnN0IEJVVFRPTl9XSURUSDpudW1iZXIgPSAxNTBcbmNvbnN0IEJVVFRPTl9IRUlHSFQ6bnVtYmVyID0gNTBcblxuY29uc3QgZW51bSBESVJFQ1RJT04ge1xuICBVcCA9IDAsXG4gIFJpZ2h0LFxuICBEb3duLFxuICBMZWZ0XG59XG5cbmNsYXNzIFZpc3VhbGl6YXRpb24ge1xuICBjaGVja2VyMTpQSVhJLkRpc3BsYXlPYmplY3RcbiAgY2hlY2tlcjI6UElYSS5EaXNwbGF5T2JqZWN0XG4gIGJvYXJkTGF5b3V0Om51bWJlcltdW11cbiAgc3RhcnRpbmdQb3NpdGlvbjpQSVhJLlBvaW50XG4gIHNxdWFyZVNpemU6bnVtYmVyXG4gIHNvdW5kczpTb3VuZHNcbiAgcnVubmluZzpib29sZWFuXG4gIHRpbWVvdXQ6bnVtYmVyXG4gIG1lc3NhZ2U6UElYSS5UZXh0XG4gIGNvbnN0cnVjdG9yKGNoZWNrZXIxOlBJWEkuRGlzcGxheU9iamVjdCwgY2hlY2tlcjI6UElYSS5EaXNwbGF5T2JqZWN0LCBib2FyZExheW91dDpudW1iZXJbXVtdLCBzdGFydGluZ1Bvc2l0aW9uOlBJWEkuUG9pbnQsIHNxdWFyZVNpemU6bnVtYmVyLCBzb3VuZHM6U291bmRzKSB7XG4gICAgdGhpcy5jaGVja2VyMSA9IGNoZWNrZXIxXG4gICAgdGhpcy5jaGVja2VyMiA9IGNoZWNrZXIyXG4gICAgdGhpcy5ib2FyZExheW91dCA9IGJvYXJkTGF5b3V0XG4gICAgdGhpcy5zdGFydGluZ1Bvc2l0aW9uID0gc3RhcnRpbmdQb3NpdGlvblxuICAgIHRoaXMuc3F1YXJlU2l6ZSA9IHNxdWFyZVNpemVcbiAgICB0aGlzLnNvdW5kcyA9IHNvdW5kc1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlXG4gIH1cbn1cblxuKGZ1bmN0aW9uKCk6dm9pZCB7XG4gIGNvbnN0IHNvdW5kczpTb3VuZHMgPSBuZXcgU291bmRzKHtcbiAgICBtb3ZlOiAnLi9zb3VuZHMvbW92ZS5tcDMnLFxuICAgIGNvbGxpZGU6ICcuL3NvdW5kcy9jb2xsaWRlLndhdicsXG4gICAgZmFsbDogJy4vc291bmRzL2ZhbGwud2F2JyxcbiAgfSlcbiAgY29uc3QgcmVuZGVyZXI6UElYSS5XZWJHTFJlbmRlcmVyID0gbmV3IFBJWEkuV2ViR0xSZW5kZXJlcihTQ1JFRU5fV0lEVEgsIFNDUkVFTl9IRUlHSFQpXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIudmlldylcbiAgY29uc3Qgc3RhZ2U6UElYSS5Db250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKVxuICByZW5kZXJMb29wKHJlbmRlcmVyLCBzdGFnZSlcbiAgY29uc3QgdmlzdWFsaXphdGlvbkJvYXJkOlBJWEkuQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKClcbiAgdmlzdWFsaXphdGlvbkJvYXJkLnBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQoU0NSRUVOX1dJRFRIIC8gMiwgU0NSRUVOX0hFSUdIVCAvIDIgLSBCVVRUT05fSEVJR0hUIC8gMilcbiAgc3RhZ2UuYWRkQ2hpbGQodmlzdWFsaXphdGlvbkJvYXJkKVxuICBjb25zdCB2aXN1YWxpemF0aW9uOlZpc3VhbGl6YXRpb24gPSBuZXdWaXN1YWxpemF0aW9uKHZpc3VhbGl6YXRpb25Cb2FyZCwgSU5JVElBTF9TSVpFLCBzb3VuZHMpXG4gIGNyZWF0ZUNvbnRyb2xzKHN0YWdlLCB2aXN1YWxpemF0aW9uQm9hcmQsIHZpc3VhbGl6YXRpb24pXG59KSgpXG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xzKHN0YWdlOlBJWEkuQ29udGFpbmVyLCB2aXN1YWxpemF0aW9uQm9hcmQ6UElYSS5Db250YWluZXIsIHZpc3VhbGl6YXRpb246VmlzdWFsaXphdGlvbikge1xuICBmdW5jdGlvbiBjaGFuZ2VTaXplKGFtb3VudDpudW1iZXIpIHtcbiAgICBzdG9wKHZpc3VhbGl6YXRpb24pXG4gICAgbGV0IG5ld1NpemU6bnVtYmVyID0gdmlzdWFsaXphdGlvbi5ib2FyZExheW91dC5sZW5ndGggKyBhbW91bnRcbiAgICBpZihuZXdTaXplIDwgMSlcbiAgICAgIG5ld1NpemUgPSAxXG4gICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgbWVzc2FnZSB0ZXh0IGluIHRoZSBuZXcgdmlzdWFsaXphdGlvblxuICAgIGNvbnN0IG1lc3NhZ2U6UElYSS5UZXh0ID0gdmlzdWFsaXphdGlvbi5tZXNzYWdlXG4gICAgbWVzc2FnZS50ZXh0ID0gJ1ByZXNzIFBsYXkgdG8gQmVnaW4nXG4gICAgdmlzdWFsaXphdGlvbiA9IG5ld1Zpc3VhbGl6YXRpb24odmlzdWFsaXphdGlvbkJvYXJkLCBuZXdTaXplLCB2aXN1YWxpemF0aW9uLnNvdW5kcylcbiAgICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UgPSBtZXNzYWdlXG4gIH1cbiAgc3RhZ2UuYWRkQ2hpbGQoY3JlYXRlQnV0dG9uKFxuICAgIFNDUkVFTl9XSURUSCAvIDIgLSBCVVRUT05fV0lEVEggKiAxLjUgLSA2MCxcbiAgICBTQ1JFRU5fSEVJR0hUIC0gQlVUVE9OX0hFSUdIVCAvIDIgLSA1MCxcbiAgICAnLScsXG4gICAgKCkgPT4gY2hhbmdlU2l6ZSgtMSksXG4gICAgdHJ1ZSAvLyBzbWFsbCBidXR0b25cbiAgKSlcbiAgc3RhZ2UuYWRkQ2hpbGQoY3JlYXRlQnV0dG9uKFxuICAgIFNDUkVFTl9XSURUSCAvIDIgLSBCVVRUT05fV0lEVEggKiAyIC0gODAsXG4gICAgU0NSRUVOX0hFSUdIVCAtIEJVVFRPTl9IRUlHSFQgLyAyIC0gNTAsXG4gICAgJysnLFxuICAgICgpID0+IGNoYW5nZVNpemUoMSksXG4gICAgdHJ1ZSAvLyBzbWFsbCBidXR0b25cbiAgKSlcbiAgc3RhZ2UuYWRkQ2hpbGQoY3JlYXRlQnV0dG9uKFxuICAgIFNDUkVFTl9XSURUSCAvIDIgLSBCVVRUT05fV0lEVEggLyAyIC0gMjAsXG4gICAgU0NSRUVOX0hFSUdIVCAtIEJVVFRPTl9IRUlHSFQgLyAyIC0gNTAsXG4gICAgJ1NodWZmbGUnLFxuICAgICgpID0+IHtcbiAgICAgIHN0b3AodmlzdWFsaXphdGlvbilcbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIG1lc3NhZ2UgdGV4dCBpbiB0aGUgbmV3IHZpc3VhbGl6YXRpb25cbiAgICAgIGNvbnN0IG1lc3NhZ2U6UElYSS5UZXh0ID0gdmlzdWFsaXphdGlvbi5tZXNzYWdlXG4gICAgICBtZXNzYWdlLnRleHQgPSAnUHJlc3MgUGxheSB0byBCZWdpbidcbiAgICAgIHZpc3VhbGl6YXRpb24gPSBuZXdWaXN1YWxpemF0aW9uKHZpc3VhbGl6YXRpb25Cb2FyZCwgdmlzdWFsaXphdGlvbi5ib2FyZExheW91dC5sZW5ndGgsIHZpc3VhbGl6YXRpb24uc291bmRzKVxuICAgICAgdmlzdWFsaXphdGlvbi5tZXNzYWdlID0gbWVzc2FnZVxuICAgIH1cbiAgKSlcbiAgc3RhZ2UuYWRkQ2hpbGQoY3JlYXRlQnV0dG9uKFxuICAgIFNDUkVFTl9XSURUSCAvIDIgKyBCVVRUT05fV0lEVEggLyAyICsgMjAsXG4gICAgU0NSRUVOX0hFSUdIVCAtIEJVVFRPTl9IRUlHSFQgLyAyIC0gNTAsXG4gICAgJ1BsYXknLFxuICAgICgpID0+IHsgaWYoIXZpc3VhbGl6YXRpb24ucnVubmluZykgcGxheSh2aXN1YWxpemF0aW9uKSB9XG4gICkpXG4gIHN0YWdlLmFkZENoaWxkKGNyZWF0ZUJ1dHRvbihcbiAgICBTQ1JFRU5fV0lEVEggLyAyICsgQlVUVE9OX1dJRFRIICogMS41ICsgNjAsXG4gICAgU0NSRUVOX0hFSUdIVCAtIEJVVFRPTl9IRUlHSFQgLyAyIC0gNTAsXG4gICAgJ1N0b3AnLFxuICAgICgpID0+IHtcbiAgICAgIGlmKHZpc3VhbGl6YXRpb24ucnVubmluZykge1xuICAgICAgICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UudGV4dCA9ICdTdG9wcGVkJ1xuICAgICAgICBzdG9wKHZpc3VhbGl6YXRpb24pXG4gICAgICB9XG4gICAgfVxuICApKVxuICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UgPSBuZXcgUElYSS5UZXh0KCdQcmVzcyBQbGF5IHRvIEJlZ2luJywge1xuICAgIGZpbGw6IFsweGNjY2NjYywgQ09MT1JfQlVUVE9OXSxcbiAgICBzdHJva2U6IDB4ZWVlZWVlLFxuICAgIHN0cm9rZVRoaWNrbmVzczogMlxuICB9KVxuICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UuYW5jaG9yLnggPSAuNVxuICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludChTQ1JFRU5fV0lEVEggLyAyLCAyMClcbiAgc3RhZ2UuYWRkQ2hpbGQodmlzdWFsaXphdGlvbi5tZXNzYWdlKVxufVxuXG5mdW5jdGlvbiBuZXdWaXN1YWxpemF0aW9uKHZpc3VhbGl6YXRpb25Cb2FyZDpQSVhJLkNvbnRhaW5lciwgYm9hcmRTaXplOm51bWJlciwgc291bmRzOlNvdW5kcyk6VmlzdWFsaXphdGlvbiB7XG4gIGNvbnN0IGJvYXJkTGF5b3V0Om51bWJlcltdW10gPSBuZXdCb2FyZExheW91dChib2FyZFNpemUpXG4gIGNvbnN0IHNxdWFyZVNpemU6bnVtYmVyID0gTWF0aC5taW4oU0NSRUVOX1dJRFRIIC8gYm9hcmRTaXplLCBTQ1JFRU5fSEVJR0hUIC8gYm9hcmRTaXplKSAqIC43NVxuICBjcmVhdGVCb2FyZCh2aXN1YWxpemF0aW9uQm9hcmQsIGJvYXJkTGF5b3V0LCBzcXVhcmVTaXplKVxuICBjb25zdCBzdGFydGluZ1Bvc2l0aW9uOlBJWEkuUG9pbnQgPSByYW5kb21Qb3NpdGlvbihib2FyZExheW91dClcbiAgY29uc3QgY2hlY2tlcjE6UElYSS5EaXNwbGF5T2JqZWN0ID0gY3JlYXRlQ2hlY2tlcihzcXVhcmVTaXplKVxuICB2aXN1YWxpemF0aW9uQm9hcmQuYWRkQ2hpbGQoY2hlY2tlcjEpXG4gIGNoZWNrZXIxLnBvc2l0aW9uID0gYm9hcmRQb3NpdGlvblRvUGl4ZWxzKGJvYXJkTGF5b3V0Lmxlbmd0aCwgc3F1YXJlU2l6ZSwgc3RhcnRpbmdQb3NpdGlvbilcbiAgY29uc3QgY2hlY2tlcjI6UElYSS5EaXNwbGF5T2JqZWN0ID0gY3JlYXRlQ2hlY2tlcihzcXVhcmVTaXplKVxuICB2aXN1YWxpemF0aW9uQm9hcmQuYWRkQ2hpbGQoY2hlY2tlcjIpXG4gIGNoZWNrZXIyLnBvc2l0aW9uID0gYm9hcmRQb3NpdGlvblRvUGl4ZWxzKGJvYXJkTGF5b3V0Lmxlbmd0aCwgc3F1YXJlU2l6ZSwgc3RhcnRpbmdQb3NpdGlvbilcbiAgcmV0dXJuIG5ldyBWaXN1YWxpemF0aW9uKGNoZWNrZXIxLCBjaGVja2VyMiwgYm9hcmRMYXlvdXQsIHN0YXJ0aW5nUG9zaXRpb24sIHNxdWFyZVNpemUsIHNvdW5kcylcbn1cblxuZnVuY3Rpb24gcGxheSh2aXN1YWxpemF0aW9uOlZpc3VhbGl6YXRpb24sIGNoZWNrZXIxUG9zaXRpb246UElYSS5Qb2ludCA9IG51bGwsIGNoZWNrZXIyUG9zaXRpb246UElYSS5Qb2ludCA9IG51bGwsIGV2ZW5Nb3ZlOmJvb2xlYW4gPSBmYWxzZSk6dm9pZCB7XG4gIHZpc3VhbGl6YXRpb24ubWVzc2FnZS50ZXh0ID0gXCJSdW5uaW5nXCJcbiAgdmlzdWFsaXphdGlvbi5ydW5uaW5nID0gdHJ1ZVxuICBpZighY2hlY2tlcjFQb3NpdGlvbikge1xuICAgIGNoZWNrZXIxUG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCh2aXN1YWxpemF0aW9uLnN0YXJ0aW5nUG9zaXRpb24ueCwgdmlzdWFsaXphdGlvbi5zdGFydGluZ1Bvc2l0aW9uLnkpXG4gICAgY2hlY2tlcjJQb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KHZpc3VhbGl6YXRpb24uc3RhcnRpbmdQb3NpdGlvbi54LCB2aXN1YWxpemF0aW9uLnN0YXJ0aW5nUG9zaXRpb24ueSlcbiAgfVxuICBsZXQgZW5kQ29uZGl0aW9uOnN0cmluZ1xuICBjaGVja2VyMVBvc2l0aW9uID0gbW92ZUNoZWNrZXIodmlzdWFsaXphdGlvbi5jaGVja2VyMSwgY2hlY2tlcjFQb3NpdGlvbiwgdmlzdWFsaXphdGlvbi5ib2FyZExheW91dCwgdmlzdWFsaXphdGlvbi5zcXVhcmVTaXplKVxuICAvLyBIYXZlIHRvIGNoZWNrIGJlZm9yZSBtb3ZpbmcgdGhlIHNlY29uZCBjaGVja2VyXG4gIGVuZENvbmRpdGlvbiA9IHRlc3RFbmRDb25kaXRpb24odmlzdWFsaXphdGlvbi5ib2FyZExheW91dCwgY2hlY2tlcjFQb3NpdGlvbiwgY2hlY2tlcjJQb3NpdGlvbilcbiAgaWYoIWVuZENvbmRpdGlvbiAmJiBldmVuTW92ZSkge1xuICAgIGNoZWNrZXIyUG9zaXRpb24gPSBtb3ZlQ2hlY2tlcih2aXN1YWxpemF0aW9uLmNoZWNrZXIyLCBjaGVja2VyMlBvc2l0aW9uLCB2aXN1YWxpemF0aW9uLmJvYXJkTGF5b3V0LCB2aXN1YWxpemF0aW9uLnNxdWFyZVNpemUpXG4gICAgZW5kQ29uZGl0aW9uID0gdGVzdEVuZENvbmRpdGlvbih2aXN1YWxpemF0aW9uLmJvYXJkTGF5b3V0LCBjaGVja2VyMVBvc2l0aW9uLCBjaGVja2VyMlBvc2l0aW9uKVxuICB9XG4gIHZpc3VhbGl6YXRpb24uc291bmRzLnBsYXkoJ21vdmUnKVxuICBpZihlbmRDb25kaXRpb24pIHtcbiAgICBUd2VlbkxpdGUudG8odmlzdWFsaXphdGlvbi5jaGVja2VyMS5zY2FsZSwgLjUsIHt4OiAwLCB5OiAwfSlcbiAgICB2aXN1YWxpemF0aW9uLm1lc3NhZ2UudGV4dCA9IGVuZENvbmRpdGlvblxuICAgIHZpc3VhbGl6YXRpb24uc291bmRzLnBsYXkoZW5kQ29uZGl0aW9uLmluZGV4T2YoJ25vbicpIDwgMCA/ICdjb2xsaWRlJyA6ICdmYWxsJylcbiAgICBzZXRUaW1lb3V0KCgpID0+IHN0b3AodmlzdWFsaXphdGlvbiksIDUwMClcbiAgfVxuICBlbHNlXG4gICAgdmlzdWFsaXphdGlvbi50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBwbGF5KHZpc3VhbGl6YXRpb24sIGNoZWNrZXIxUG9zaXRpb24sIGNoZWNrZXIyUG9zaXRpb24sICFldmVuTW92ZSksIDUwMClcbn1cblxuZnVuY3Rpb24gc3RvcCh2aXN1YWxpemF0aW9uOlZpc3VhbGl6YXRpb24pIHtcbiAgaWYodmlzdWFsaXphdGlvbi5ydW5uaW5nKSB7XG4gICAgaWYodmlzdWFsaXphdGlvbi50aW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodmlzdWFsaXphdGlvbi50aW1lb3V0KVxuICAgICAgdmlzdWFsaXphdGlvbi50aW1lb3V0ID0gbnVsbFxuICAgIH1cbiAgICBjb25zdCBwaXhlbFBvc2l0aW9uOlBJWEkuUG9pbnQgPSBib2FyZFBvc2l0aW9uVG9QaXhlbHModmlzdWFsaXphdGlvbi5ib2FyZExheW91dC5sZW5ndGgsIHZpc3VhbGl6YXRpb24uc3F1YXJlU2l6ZSwgdmlzdWFsaXphdGlvbi5zdGFydGluZ1Bvc2l0aW9uKVxuICAgIFR3ZWVuTGl0ZS50byh2aXN1YWxpemF0aW9uLmNoZWNrZXIxLnNjYWxlLCAuMywge3g6IDEsIHk6IDF9KVxuICAgIFR3ZWVuTGl0ZS50byh2aXN1YWxpemF0aW9uLmNoZWNrZXIxLnBvc2l0aW9uLCAuMywge3g6IHBpeGVsUG9zaXRpb24ueCwgeTogcGl4ZWxQb3NpdGlvbi55fSlcbiAgICBUd2VlbkxpdGUudG8odmlzdWFsaXphdGlvbi5jaGVja2VyMi5wb3NpdGlvbiwgLjMsIHt4OiBwaXhlbFBvc2l0aW9uLngsIHk6IHBpeGVsUG9zaXRpb24ueX0pXG4gICAgdmlzdWFsaXphdGlvbi5ydW5uaW5nID0gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3ZlQ2hlY2tlcihjaGVja2VyOlBJWEkuRGlzcGxheU9iamVjdCwgY3VycmVudFBvc2l0aW9uOlBJWEkuUG9pbnQsIGJvYXJkTGF5b3V0Om51bWJlcltdW10sIHNxdWFyZVNpemU6bnVtYmVyKTpQSVhJLlBvaW50IHtcbiAgY29uc3QgZGlyZWN0aW9uOkRJUkVDVElPTiA9IGJvYXJkTGF5b3V0W2N1cnJlbnRQb3NpdGlvbi54XVtjdXJyZW50UG9zaXRpb24ueV1cbiAgbGV0IG5leHRQb3NpdGlvbjpQSVhJLlBvaW50XG4gIHN3aXRjaChkaXJlY3Rpb24pIHtcbiAgICBjYXNlIERJUkVDVElPTi5VcDpcbiAgICAgIG5leHRQb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KGN1cnJlbnRQb3NpdGlvbi54IC0gMSwgY3VycmVudFBvc2l0aW9uLnkpXG4gICAgICBicmVhaztcbiAgICBjYXNlIERJUkVDVElPTi5Eb3duOlxuICAgICAgbmV4dFBvc2l0aW9uID0gbmV3IFBJWEkuUG9pbnQoY3VycmVudFBvc2l0aW9uLnggKyAxLCBjdXJyZW50UG9zaXRpb24ueSlcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRElSRUNUSU9OLkxlZnQ6XG4gICAgICBuZXh0UG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludChjdXJyZW50UG9zaXRpb24ueCwgY3VycmVudFBvc2l0aW9uLnkgLSAxKVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBESVJFQ1RJT04uUmlnaHQ6XG4gICAgICBuZXh0UG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludChjdXJyZW50UG9zaXRpb24ueCwgY3VycmVudFBvc2l0aW9uLnkgKyAxKVxuICAgICAgYnJlYWs7XG4gIH1cbiAgY29uc3QgcGl4ZWxQb3NpdGlvbjpQSVhJLlBvaW50ID0gYm9hcmRQb3NpdGlvblRvUGl4ZWxzKGJvYXJkTGF5b3V0Lmxlbmd0aCwgc3F1YXJlU2l6ZSwgbmV4dFBvc2l0aW9uKVxuICBUd2VlbkxpdGUudG8oY2hlY2tlci5wb3NpdGlvbiwgLjMsIHt4OiBwaXhlbFBvc2l0aW9uLngsIHk6IHBpeGVsUG9zaXRpb24ueX0pXG4gIHJldHVybiBuZXh0UG9zaXRpb25cbn1cblxuZnVuY3Rpb24gdGVzdEVuZENvbmRpdGlvbihib2FyZExheW91dDpudW1iZXJbXVtdLCBjaGVja2VyMVBvc2l0aW9uOlBJWEkuUG9pbnQsIGNoZWNrZXIyUG9zaXRpb246UElYSS5Qb2ludCk6c3RyaW5nIHtcbiAgbGV0IGVuZENvbmRpdGlvbjpzdHJpbmdcbiAgaWYoIXZhbGlkUG9zaXRpb24oYm9hcmRMYXlvdXQsIGNoZWNrZXIxUG9zaXRpb24pKVxuICAgIGVuZENvbmRpdGlvbiA9ICdUaGUgcGF0aCBpcyBub25jaXJjdWxhci4nXG4gIGVsc2UgaWYoc2FtZVBvc2l0aW9uKGNoZWNrZXIxUG9zaXRpb24sIGNoZWNrZXIyUG9zaXRpb24pKVxuICAgIGVuZENvbmRpdGlvbiA9ICdUaGUgcGF0aCBpcyBjaXJjdWxhci4nXG4gIHJldHVybiBlbmRDb25kaXRpb25cbn1cblxuZnVuY3Rpb24gdmFsaWRQb3NpdGlvbihib2FyZExheW91dDpudW1iZXJbXVtdLCBwb3NpdGlvbjpQSVhJLlBvaW50KTpib29sZWFuIHtcbiAgcmV0dXJuICEoXG4gICAgcG9zaXRpb24ueCA8IDAgfHxcbiAgICBwb3NpdGlvbi54ID4gYm9hcmRMYXlvdXQubGVuZ3RoIC0gMSB8fFxuICAgIHBvc2l0aW9uLnkgPCAwIHx8XG4gICAgcG9zaXRpb24ueSA+IGJvYXJkTGF5b3V0WzBdLmxlbmd0aCAtIDFcbiAgKVxufVxuXG5mdW5jdGlvbiBzYW1lUG9zaXRpb24ocG9zaXRpb24xOlBJWEkuUG9pbnQsIHBvc2l0aW9uMjpQSVhJLlBvaW50KSB7XG4gIHJldHVybiBwb3NpdGlvbjEueCA9PT0gcG9zaXRpb24yLnggJiYgcG9zaXRpb24xLnkgPT09IHBvc2l0aW9uMi55XG59XG5cbmZ1bmN0aW9uIG5ld0JvYXJkTGF5b3V0KHNpemUpOm51bWJlcltdW10ge1xuICBjb25zdCBib2FyZExheW91dDpudW1iZXJbXVtdID0gW11cbiAgZm9yKGxldCByb3c6bnVtYmVyID0gMCA7IHJvdyA8IHNpemUgOyByb3crKykge1xuICAgIGJvYXJkTGF5b3V0LnB1c2goW10pXG4gICAgZm9yKGxldCBjb2w6bnVtYmVyID0gMCA7IGNvbCA8IHNpemUgOyBjb2wrKykge1xuICAgICAgY29uc3QgYm9hcmRQb3NpdGlvbjpQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQocm93LCBjb2wpXG4gICAgICBjb25zdCBhcnJvd0RpcmVjdGlvbjpESVJFQ1RJT04gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgICAgYm9hcmRMYXlvdXRbcm93XS5wdXNoKGFycm93RGlyZWN0aW9uKVxuICAgIH1cbiAgfVxuICByZXR1cm4gYm9hcmRMYXlvdXRcbn1cblxuZnVuY3Rpb24gY3JlYXRlQm9hcmQodmlzdWFsaXphdGlvbkJvYXJkOlBJWEkuQ29udGFpbmVyLCBib2FyZExheW91dDpudW1iZXJbXVtdLCBzcXVhcmVTaXplOm51bWJlcik6UElYSS5Db250YWluZXIge1xuICBjbGVhckNvbnRhaW5lcih2aXN1YWxpemF0aW9uQm9hcmQpXG4gIGNvbnN0IHJvd3M6bnVtYmVyID0gYm9hcmRMYXlvdXQubGVuZ3RoXG4gIGNvbnN0IGNvbHM6bnVtYmVyID0gYm9hcmRMYXlvdXRbMF0ubGVuZ3RoXG4gIGxldCBldmVuOmJvb2xlYW4gPSBmYWxzZVxuICBmb3IobGV0IHJvdzpudW1iZXIgPSAwIDsgcm93IDwgcm93cyA7IHJvdysrKSB7XG4gICAgZm9yKGxldCBjb2w6bnVtYmVyID0gMCA7IGNvbCA8IGNvbHMgOyBjb2wrKykge1xuICAgICAgY29uc3QgYm9hcmRQb3NpdGlvbjpQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQocm93LCBjb2wpXG4gICAgICBjb25zdCBzcXVhcmU6UElYSS5HcmFwaGljcyA9IGNyZWF0ZVNxdWFyZShzcXVhcmVTaXplLCBldmVuKVxuICAgICAgc3F1YXJlLnBvc2l0aW9uID0gYm9hcmRQb3NpdGlvblRvUGl4ZWxzKGJvYXJkTGF5b3V0Lmxlbmd0aCwgc3F1YXJlU2l6ZSwgYm9hcmRQb3NpdGlvbilcbiAgICAgIHZpc3VhbGl6YXRpb25Cb2FyZC5hZGRDaGlsZChzcXVhcmUpXG4gICAgICBzcXVhcmUuYWRkQ2hpbGQoY3JlYXRlQXJyb3coc3F1YXJlU2l6ZSwgYm9hcmRMYXlvdXRbcm93XVtjb2xdKSlcbiAgICAgIGV2ZW4gPSAhZXZlblxuICAgIH1cbiAgICBpZihyb3dzICUgMiA9PT0gMClcbiAgICAgIGV2ZW4gPSAhZXZlblxuICB9XG4gIHJldHVybiB2aXN1YWxpemF0aW9uQm9hcmRcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3F1YXJlKHNpemU6bnVtYmVyLCBldmVuOmJvb2xlYW4pOlBJWEkuR3JhcGhpY3Mge1xuICBjb25zdCBzcXVhcmU6UElYSS5HcmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbiAgc3F1YXJlLmJlZ2luRmlsbChldmVuID8gQ09MT1JfRVZFTiA6IENPTE9SX09ERClcbiAgc3F1YXJlLmRyYXdSZWN0KC1zaXplIC8gMiwgLXNpemUgLyAyLCBzaXplLCBzaXplKVxuICBzcXVhcmUuZW5kRmlsbCgpXG4gIHJldHVybiBzcXVhcmVcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyb3coc2l6ZTpudW1iZXIsIGRpcmVjdGlvbjpESVJFQ1RJT04pOlBJWEkuR3JhcGhpY3Mge1xuICBjb25zdCBhcnJvdzpQSVhJLkdyYXBoaWNzID0gbmV3IFBJWEkuR3JhcGhpY3MoKVxuICBhcnJvdy5iZWdpbkZpbGwoQ09MT1JfQVJST1cpXG4gIGFycm93LmRyYXdSZWN0KC1zaXplIC8gMTIsIC1zaXplICogLjIsIHNpemUgLyA2LCBzaXplICogLjYpXG4gIGFycm93LmRyYXdQb2x5Z29uKFtcbiAgICBuZXcgUElYSS5Qb2ludCgwLCAtc2l6ZSAqIC40KSxcbiAgICBuZXcgUElYSS5Qb2ludCgtc2l6ZSAqIC4yNSwgLXNpemUgKiAuMSksXG4gICAgbmV3IFBJWEkuUG9pbnQoc2l6ZSAqIC4yNSwgLXNpemUgKiAuMSlcbiAgXSlcbiAgYXJyb3cuZW5kRmlsbCgpXG4gIGFycm93LnJvdGF0aW9uID0gTWF0aC5QSSAvIDIgKiBkaXJlY3Rpb25cbiAgcmV0dXJuIGFycm93XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrZXIoc2l6ZTpudW1iZXIpOlBJWEkuR3JhcGhpY3Mge1xuICBjb25zdCBjaGVja2VyOlBJWEkuR3JhcGhpY3MgPSBuZXcgUElYSS5HcmFwaGljcygpXG4gIGNoZWNrZXIuYWxwaGEgPSAuNzVcbiAgY2hlY2tlci5saW5lU3R5bGUoMiwgMHhlZWVlZWUpXG4gIGNoZWNrZXIuYmVnaW5GaWxsKENPTE9SX0NIRUNLRVIpXG4gIGNoZWNrZXIuZHJhd0NpcmNsZSgwLCAwLCBzaXplICogLjMpXG4gIGNoZWNrZXIuZW5kRmlsbCgpXG4gIHJldHVybiBjaGVja2VyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbih4Om51bWJlciwgeTpudW1iZXIsIGxhYmVsOnN0cmluZywgYWN0aW9uLCBzbWFsbDpib29sZWFuID0gZmFsc2UpOlBJWEkuR3JhcGhpY3Mge1xuICBjb25zdCBidXR0b246UElYSS5HcmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKClcbiAgY29uc3Qgd2lkdGg6bnVtYmVyID0gc21hbGwgPyBCVVRUT05fV0lEVEggLyAyIDogQlVUVE9OX1dJRFRIXG4gIGJ1dHRvbi5wb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KHggLSB3aWR0aCAvIDIsIHkgLSBCVVRUT05fSEVJR0hUIC8gMilcbiAgYnV0dG9uLmxpbmVTdHlsZSgyLCAweGVlZWVlZSlcbiAgYnV0dG9uLmJlZ2luRmlsbChDT0xPUl9CVVRUT04pXG4gIGJ1dHRvbi5kcmF3UmVjdCgwLCAwLCB3aWR0aCwgQlVUVE9OX0hFSUdIVClcbiAgYnV0dG9uLmVuZEZpbGwoKVxuICBjb25zdCB0ZXh0OlBJWEkuVGV4dCA9IG5ldyBQSVhJLlRleHQobGFiZWwsIHtzdHJva2U6IDB4ZWVlZWVlLCBmaWxsOiAweDExMTExMSwgc3Ryb2tlVGhpY2tuZXNzOiAyLCBhbGlnbjogJ2NlbnRlcicsIGxpbmVKb2luOiAncm91bmQnfSlcbiAgdGV4dC5wb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KHdpZHRoIC8gMiwgQlVUVE9OX0hFSUdIVCAvIDIpXG4gIHRleHQuYW5jaG9yLnggPSAuNVxuICB0ZXh0LmFuY2hvci55ID0gLjVcbiAgYnV0dG9uLmFkZENoaWxkKHRleHQpXG4gIGJ1dHRvbi5pbnRlcmFjdGl2ZSA9IHRydWVcbiAgYnV0dG9uLm9uKCdtb3VzZXVwJywgYWN0aW9uKVxuICBidXR0b24ub24oJ3RvdWNoZW5kJywgYWN0aW9uKVxuICByZXR1cm4gYnV0dG9uXG59XG5cbmZ1bmN0aW9uIGJvYXJkUG9zaXRpb25Ub1BpeGVscyhib2FyZFNpemU6bnVtYmVyLCBzcXVhcmVTaXplOm51bWJlciwgYm9hcmRQb3NpdGlvbjpQSVhJLlBvaW50KTpQSVhJLlBvaW50IHtcbiAgcmV0dXJuIG5ldyBQSVhJLlBvaW50KFxuICAgIChib2FyZFBvc2l0aW9uLnkgLSBib2FyZFNpemUgLyAyKSAqIHNxdWFyZVNpemUsXG4gICAgKGJvYXJkUG9zaXRpb24ueCAtIGJvYXJkU2l6ZSAvIDIpICogc3F1YXJlU2l6ZVxuICApXG59XG5cbmZ1bmN0aW9uIHJhbmRvbVBvc2l0aW9uKGJvYXJkTGF5b3V0Om51bWJlcltdW10pOlBJWEkuUG9pbnQge1xuICByZXR1cm4gbmV3IFBJWEkuUG9pbnQoXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZExheW91dC5sZW5ndGgpLFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYm9hcmRMYXlvdXRbMF0ubGVuZ3RoKVxuICApXG59XG5cbmZ1bmN0aW9uIGNsZWFyQ29udGFpbmVyKGNvbnRhaW5lcjpQSVhJLkNvbnRhaW5lcik6dm9pZCB7XG4gIGNvbnRhaW5lci5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkOlBJWEkuRGlzcGxheU9iamVjdCkgeyBjaGlsZC5kZXN0cm95KCkgfSlcbiAgY29udGFpbmVyLnJlbW92ZUNoaWxkcmVuKClcbn1cblxuZnVuY3Rpb24gcmVuZGVyTG9vcChyZW5kZXJlcjpQSVhJLldlYkdMUmVuZGVyZXIsIHN0YWdlOlBJWEkuQ29udGFpbmVyKTp2b2lkIHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVuZGVyTG9vcChyZW5kZXJlciwgc3RhZ2UpKVxuICAgIHJlbmRlcmVyLnJlbmRlcihzdGFnZSlcbn1cbiIsImV4cG9ydCBjbGFzcyBTb3VuZHMge1xuICBzb3VuZHMgPSB7fVxuICBjb25zdHJ1Y3Rvcihzb3VuZHMpIHtcbiAgICBmb3IgKGxldCBzb3VuZCBpbiBzb3VuZHMpIHtcbiAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKClcbiAgICAgIGF1ZGlvLnNyYyA9IHNvdW5kc1tzb3VuZF1cbiAgICAgIGF1ZGlvLnByZWxvYWQgPSAndHJ1ZSdcbiAgICAgIHRoaXMuc291bmRzW3NvdW5kXSA9IGF1ZGlvXG4gICAgfVxuICB9XG4gIHBsYXkoc291bmROYW1lKSB7XG4gICAgdGhpcy5zb3VuZHNbc291bmROYW1lXS5wYXVzZSgpXG4gICAgdGhpcy5zb3VuZHNbc291bmROYW1lXS5jdXJyZW50VGltZSA9IDBcbiAgICB0aGlzLnNvdW5kc1tzb3VuZE5hbWVdLnBsYXkoKVxuICB9XG59XG4iXX0=
